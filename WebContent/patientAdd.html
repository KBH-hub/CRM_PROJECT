<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>환자 정보 등록</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
	.table-fixed {
	  table-layout: fixed;
	  width: 100%;
	}
	th, td {
	  word-wrap: break-word;  /* 내용이 길어도 줄바꿈 */
	}
  </style>
</head>
<body class="bg-body-tertiary">
<div class="container-fluid">
  <div class="row">

    <!-- 여기서 사이드바를 주입 -->
    <div id="sidebar-slot" class="col-2 p-0"></div>

    <!-- 메인 -->
    <main class="col-10 p-4">
  <div class="container-fluid bg-white border rounded shadow-sm p-4">
    <form action="/registerPatient" method="post">
      <!-- 환자 기본 정보 -->
      <table class="table table-bordered align-middle mb-4">
        <tbody>
          <tr>
            <th class="table-secondary text-center">등록번호</th>
            <td><input type="text" class="form-control" value="" readonly></td>
            <th class="table-secondary text-center">이름</th>
            <td><input type="text" class="form-control" value=""></td>
            <th class="table-secondary text-center">전화번호</th>
            <td><input type="tel" class="form-control" value=""></td>
          </tr>
          <tr>
            <th class="table-secondary text-center">주소</th>
            <td colspan="3"><input type="text" class="form-control" value=""></td>
            <th class="table-secondary text-center">등록일</th>
            <td><input type="date" class="form-control" value=""></td>
          </tr>
          <tr>
            <th class="table-secondary text-center">생년월일</th>
            <td><input type="text" class="form-control" value=""></td>
            <th class="table-secondary text-center">성별</th>
            <td>
              <select class="form-select">
                <option>남</option>
                <option>여</option>
              </select>
            </td>
            <th class="table-secondary text-center">내원경로</th>
            <td><input type="text" class="form-control" value=""></td>
          </tr>
          <tr>
            <th class="table-secondary text-center">진료과</th>
            <td><input type="text" class="form-control" value="" readonly></td>
            <th class="table-secondary text-center">담당의사</th>
            <td><input type="text" class="form-control" value="" readonly></td>
            <th class="table-secondary text-center">입원여부</th>
            <td><input type="text" class="form-control" value="" readonly></td>
          </tr>
        </tbody>
      </table>

      <!-- 진료 기록 -->
      <h4 class="text-center text-white bg-secondary py-2 rounded">진료 기록</h4>
      <div class="row mt-3">
        <!-- 왼쪽: 진료 날짜 목록 -->
        <div class="col-3">
          <ul class="list-group">
            <li class="list-group-item">
              <br><small></small>
            </li>
          </ul>
        </div>

        <!-- 오른쪽: 진료 상세 -->
        <div class="col-9">
          <div class="border rounded p-3 bg-light">
            <table class="table table-bordered table-fixed mb-3">
              <tr>
                <th class="table-secondary text-center">진단명</th>
                <td></td>
                <th class="table-secondary text-center">진료일</th>
                <td></td>
                <th class="table-secondary text-center">초진여부</th>
                <td></td>
              </tr>
              <tr>
                <th class="table-secondary text-center">담당의사</th>
                <td></td>
                <th class="table-secondary text-center">진료과</th>
                <td></td>
                <th class="table-secondary text-center">보험 종류</th>
                <td></td>
              </tr>
            </table>

            <div>
              <p class="mb-0"><strong class="text-primary">내용 :</strong><br></p>
            </div>
          </div>
        </div>
      </div>

      <!-- 등록 버튼 -->
      <div class="text-end mt-4">
        <button type="submit" class="btn btn-primary px-4" id="add-btn">등록</button>
      </div>
    </form>
  </div>
  </main>
		</div>
	</div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
	  // sidebar.html을 불러와서 #sidebar-slot에 삽입
	  async function loadSidebar(activeKey) {
	    const slot = document.getElementById('sidebar-slot');
	    const resp = await fetch('./sidebar.html'); // 경로는 프로젝트 구조에 맞게
	    const html = await resp.text();
	    slot.innerHTML = html;

	    // 활성 메뉴 표시 (data-route 값을 사용)
	    const current = slot.querySelector(`[data-route="${activeKey}"]`);
	    if (current) {
	      // 전부 초기화
	      slot.querySelectorAll('#sidebar-nav .nav-link').forEach(a=>{
	        a.classList.remove('active','bg-primary','text-white');
	        a.classList.add('text-dark');
	      });
	      // 현재만 활성
	      current.classList.add('active','bg-primary','text-white');
	      current.classList.remove('text-dark');
	    }
	  }
	  
	  // 이 페이지의 활성 키만 바꿔주면 됨
	  loadSidebar('patientList');
	  
	  document.getElementById("add-btn").addEventListener("click", () => {
		  window.location.href = "patientList.html";
		});
  </script>
</body>
</html>
